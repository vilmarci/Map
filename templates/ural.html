<!DOCTYPE html>
<html>
  <head>
    <title>Draw and Export Polygon as GeoJSON</title>
    <!-- Replace YOUR_API_KEY with your actual API key -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCj93I_sukBE4FkFCVRPIpBFpAYqIj3Lqs&libraries=drawing"></script>
    <script>
      function initMap() {
        // Center the map on the Ural region (you can adjust as needed)
        var map = new google.maps.Map(document.getElementById('map'), {
          center: { lat: 60, lng: 60 },
          zoom: 5
        });

        // Initialize the Drawing Manager
        var drawingManager = new google.maps.drawing.DrawingManager({
          drawingMode: google.maps.drawing.OverlayType.POLYGON,
          drawingControl: true,
          drawingControlOptions: {
            position: google.maps.ControlPosition.TOP_CENTER,
            drawingModes: ['polygon']
          },
          polygonOptions: {
            editable: true,
            fillColor: '#FF0000',
            fillOpacity: 0.5,
            strokeWeight: 2
          }
        });
        drawingManager.setMap(map);

        // Listen for the completion of the polygon drawing
        google.maps.event.addListener(drawingManager, 'polygoncomplete', function(polygon) {
          // Get the path of the polygon
          var path = polygon.getPath();
          var coordinates = [];
          for (var i = 0; i < path.getLength(); i++) {
            var latLng = path.getAt(i);
            coordinates.push([latLng.lng(), latLng.lat()]);
          }
          // Ensure the polygon is closed
          if (coordinates.length && coordinates[0][0] !== coordinates[coordinates.length - 1][0] && coordinates[0][1] !== coordinates[coordinates.length - 1][1]) {
            coordinates.push(coordinates[0]);
          }
          
          // Create a GeoJSON polygon object
          var geojson = {
            "type": "Polygon",
            "coordinates": [coordinates]
          };

          // For demonstration, log it to the console
          console.log("GeoJSON output:", JSON.stringify(geojson, null, 2));

          // Optionally, you could display the GeoJSON to the user or send it to your server here
        });
      }
    </script>
  </head>
  <body onload="initMap()">
    <h3>Trace the Ural Mountains Outline</h3>
    <div id="map" style="height: 500px; width: 100%;"></div>
  </body>
</html>
